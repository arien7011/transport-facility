import{a as x,b as S,c as E,d as c,e as I,f as M,g as P,h as A,j as T,k as R,l as N,m as O,n as V,o as k,p as q,q as D,s as w,t as z}from"./chunk-EPXA5AK3.js";import{Fa as F,J as r,O as y,S as s,W as _,Y as p,_ as d,ca as a,da as i,ea as u,ja as b,ka as v,la as l,ma as h,na as g,s as C}from"./chunk-J2AUHKOQ.js";var f=class{static timeFormat(){return o=>o.value?x.isValidTimeFormat(o.value)?null:{InvalidTimeFormat:!0}:null}static minValue(o){return n=>{if(!n.value)return null;let e=Number(n.value);return e>=o?null:{minValue:{min:o,actual:e}}}}static employeeIdFormat(){return o=>o.value?/^[A-Za-z0-9]{3,10}$/.test(o.value)?null:{EmployeeIdFormat:!0}:null}static vehicleNumberFormat(){return o=>o.value?/^[A-Za-z0-9\- ]{2,15}$/.test(o.value)?null:{vehicleNumberFormat:!0}:null}};function j(t,o){t&1&&(a(0,"span"),l(1,"Employee ID is required"),i())}function B(t,o){t&1&&(a(0,"span"),l(1,"Employee ID must be 3-10 alphanumeric characters"),i())}function K(t,o){if(t&1&&(a(0,"div",6),s(1,j,2,0,"span")(2,B,2,0,"span"),i()),t&2){let n,e,m=v();r(),d(!((n=m.rideForm.get("employeeId"))==null||n.errors==null)&&n.errors.required?1:-1),r(),d(!((e=m.rideForm.get("employeeId"))==null||e.errors==null)&&e.errors.employeeIdFormat?2:-1)}}function L(t,o){t&1&&(a(0,"div",6),l(1,"Vehicle type is required"),i())}function U(t,o){t&1&&(a(0,"span"),l(1,"Vehicle number is required"),i())}function Y(t,o){t&1&&(a(0,"span"),l(1,"Invalid vehicle number format"),i())}function Z(t,o){if(t&1&&(a(0,"div",6),s(1,U,2,0,"span")(2,Y,2,0,"span"),i()),t&2){let n,e,m=v();r(),d(!((n=m.rideForm.get("vehicleNo"))==null||n.errors==null)&&n.errors.required?1:-1),r(),d(!((e=m.rideForm.get("vehicleNo"))==null||e.errors==null)&&e.errors.vehicleNumberFormat?2:-1)}}function $(t,o){t&1&&(a(0,"span"),l(1,"Number of seats is required"),i())}function H(t,o){t&1&&(a(0,"span"),l(1,"Minimum 1 seat required"),i())}function J(t,o){if(t&1&&(a(0,"div",6),s(1,$,2,0,"span")(2,H,2,0,"span"),i()),t&2){let n,e,m=v();r(),d(!((n=m.rideForm.get("vacantSeats"))==null||n.errors==null)&&n.errors.required?1:-1),r(),d(!((e=m.rideForm.get("vacantSeats"))==null||e.errors==null)&&e.errors.minValue?2:-1)}}function Q(t,o){t&1&&(a(0,"span"),l(1,"Departure time is required"),i())}function W(t,o){t&1&&(a(0,"span"),l(1,"Invalid time format"),i())}function X(t,o){if(t&1&&(a(0,"div",6),s(1,Q,2,0,"span")(2,W,2,0,"span"),i()),t&2){let n,e,m=v();r(),d(!((n=m.rideForm.get("time"))==null||n.errors==null)&&n.errors.required?1:-1),r(),d(!((e=m.rideForm.get("time"))==null||e.errors==null)&&e.errors.timeFormat?2:-1)}}function ee(t,o){t&1&&(a(0,"div",6),l(1,"Pickup point is required"),i())}function te(t,o){t&1&&(a(0,"div",6),l(1,"Destination is required"),i())}function ie(t,o){if(t&1&&(a(0,"div",24),l(1),i()),t&2){let n=v();r(),g(" ",n.successMessage," ")}}function ne(t,o){if(t&1&&(a(0,"div",25),l(1),i()),t&2){let n=v();r(),g(" ",n.errorMessage," ")}}var G=class t{rideForm;isSubmitting=!1;successMessage="";errorMessage="";currentDate="";vehicleTypes=z;fb=C(D);rideService=C(S);router=C(F);ngOnInit(){this.currentDate=x.getCurrentDate(),this.initializeForm()}initializeForm(){this.rideForm=this.fb.group({employeeId:["",[c.required,f.employeeIdFormat()]],vehicleType:["",[c.required]],vehicleNo:["",[c.required,f.vehicleNumberFormat()]],vacantSeats:["",[c.required,f.minValue(1)]],time:["",[c.required,f.timeFormat()]],pickupPoint:["",[c.required,c.minLength(2)]],destination:["",[c.required,c.minLength(2)]]})}isFieldInvalid(o){let n=this.rideForm.get(o);return!!(n&&n.invalid&&(n.dirty||n.touched))}onSubmit(){if(this.rideForm.invalid){this.markAllFieldsAsTouched();return}this.isSubmitting=!0,this.clearMessages();let o=this.rideForm.value;this.rideService.addRide(o).subscribe({next:n=>{this.isSubmitting=!1,n?(this.successMessage="Ride added successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/available-rides"])},2e3)):this.errorMessage="Failed to add ride. You may already have a ride for today."},error:n=>{console.error("Error adding ride:",n),this.isSubmitting=!1,this.errorMessage="An error occurred while adding the ride. Please try again."}})}onCancel(){this.router.navigate(["/"])}markAllFieldsAsTouched(){Object.keys(this.rideForm.controls).forEach(o=>{this.rideForm.get(o)?.markAsTouched()})}clearMessages(){this.successMessage="",this.errorMessage=""}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=y({type:t,selectors:[["app-add-ride"]],decls:54,vars:31,consts:[[1,"add-ride-container"],[1,"subtitle"],[1,"ride-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","employeeId"],["type","text","id","employeeId","formControlName","employeeId","placeholder","Enter your employee ID"],[1,"error-message"],["for","vehicleType"],["id","vehicleType","formControlName","vehicleType"],["value",""],[3,"value"],["for","vehicleNo"],["type","text","id","vehicleNo","formControlName","vehicleNo","placeholder","Enter vehicle number"],["for","vacantSeats"],["type","number","id","vacantSeats","formControlName","vacantSeats","min","1","max","8","placeholder","Number of available seats"],["for","time"],["type","time","id","time","formControlName","time"],["for","pickupPoint"],["type","text","id","pickupPoint","formControlName","pickupPoint","placeholder","Enter pickup location"],["for","destination"],["type","text","id","destination","formControlName","destination","placeholder","Enter destination"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"message","success"],[1,"message","error"]],template:function(n,e){n&1&&(a(0,"div",0)(1,"h2"),l(2,"Add New Ride"),i(),a(3,"p",1),l(4),i(),a(5,"form",2),b("ngSubmit",function(){return e.onSubmit()}),a(6,"div",3)(7,"label",4),l(8,"Employee ID *"),i(),u(9,"input",5),s(10,K,3,2,"div",6),i(),a(11,"div",3)(12,"label",7),l(13,"Vehicle Type *"),i(),a(14,"select",8)(15,"option",9),l(16,"Select vehicle type"),i(),a(17,"option",10),l(18),i(),a(19,"option",10),l(20),i()(),s(21,L,2,0,"div",6),i(),a(22,"div",3)(23,"label",11),l(24,"Vehicle Number *"),i(),u(25,"input",12),s(26,Z,3,2,"div",6),i(),a(27,"div",3)(28,"label",13),l(29,"Available Seats *"),i(),u(30,"input",14),s(31,J,3,2,"div",6),i(),a(32,"div",3)(33,"label",15),l(34,"Departure Time *"),i(),u(35,"input",16),s(36,X,3,2,"div",6),i(),a(37,"div",3)(38,"label",17),l(39,"Pickup Point *"),i(),u(40,"input",18),s(41,ee,2,0,"div",6),i(),a(42,"div",3)(43,"label",19),l(44,"Destination *"),i(),u(45,"input",20),s(46,te,2,0,"div",6),i(),a(47,"div",21)(48,"button",22),b("click",function(){return e.onCancel()}),l(49," Cancel "),i(),a(50,"button",23),l(51),i()(),s(52,ie,2,1,"div",24)(53,ne,2,1,"div",25),i()()),n&2&&(r(4),g("Create a new ride for today (",e.currentDate,")"),r(),_("formGroup",e.rideForm),r(4),p("error",e.isFieldInvalid("employeeId")),r(),d(e.isFieldInvalid("employeeId")?10:-1),r(4),p("error",e.isFieldInvalid("vehicleType")),r(3),_("value",e.vehicleTypes.BIKE),r(),h(e.vehicleTypes.BIKE),r(),_("value",e.vehicleTypes.CAR),r(),h(e.vehicleTypes.CAR),r(),d(e.isFieldInvalid("vehicleType")?21:-1),r(4),p("error",e.isFieldInvalid("vehicleNo")),r(),d(e.isFieldInvalid("vehicleNo")?26:-1),r(4),p("error",e.isFieldInvalid("vacantSeats")),r(),d(e.isFieldInvalid("vacantSeats")?31:-1),r(4),p("error",e.isFieldInvalid("time")),r(),d(e.isFieldInvalid("time")?36:-1),r(4),p("error",e.isFieldInvalid("pickupPoint")),r(),d(e.isFieldInvalid("pickupPoint")?41:-1),r(4),p("error",e.isFieldInvalid("destination")),r(),d(e.isFieldInvalid("destination")?46:-1),r(4),_("disabled",e.rideForm.invalid||e.isSubmitting),r(),g(" ",e.isSubmitting?"Adding Ride...":"Add Ride"," "),r(),d(e.successMessage?52:-1),r(),d(e.errorMessage?53:-1))},dependencies:[w,P,O,V,E,A,N,I,M,q,k,T,R],styles:[".add-ride-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:8px;text-align:center}.subtitle[_ngcontent-%COMP%]{color:#666;text-align:center;margin-bottom:30px;font-style:italic}.ride-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:6px;font-size:14px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:12px;border:2px solid #e0e0e0;border-radius:6px;font-size:14px;transition:border-color .3s ease;background:#fff}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf501a}input.error[_ngcontent-%COMP%], select.error[_ngcontent-%COMP%]{border-color:#f44336}input[_ngcontent-%COMP%]::placeholder{color:#999}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:12px;margin-top:4px;min-height:16px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:20px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:120px}.btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.btn-primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333;border:1px solid #ddd}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e8e8e8}.message[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin-top:16px;font-weight:500;text-align:center}.message.success[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32;border:1px solid #c8e6c8}.message.error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;border:1px solid #ffcdd2}@media (max-width: 768px){.add-ride-container[_ngcontent-%COMP%]{margin:10px;padding:16px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"]})};export{G as AddRideComponent};
